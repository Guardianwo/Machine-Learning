{% extends 'index.html' %}


{% block main %}
    <div class="row">
        <div class="col-lg-12">
            <div class="card mb-4 py-3">
                <!-- 绘制柱状图的容器 -->
                <div id="bar-chart" style="width: 100%;height:100%;min-height: 300px; margin-bottom: 20px"></div>
            </div>
        </div>
        <div class="col-lg-6">
            <div class="card mb-4">
                <div class="card-header">消费地点分布结论</div>
                <div class="card-body" style="padding-top: 10px">
                    <div class="table-responsive">

                        <p>
                            根据消费次数统计，我们可以看出，在这些地点中，第二食堂是消费次数最高的地方，其次是第五食堂和第一食堂。这表明学生和教职工在这些食堂的消费频率较高，可能是因为这些地方提供了丰富多样的饮食选择，或者价格相对较为实惠。除了食堂之外，好利来食品店也有相当数量的消费次数，这可能是因为它提供了方便快捷的零食和饮料供应。
                            值得注意的是，一些部门和教学楼的消费次数相对较低，比如财经系、外语系和旅游系。这可能意味着这些部门的工作性质或学科特点导致了他们在校内消费上的较低需求。因此，在未来的管理和服务规划中，可以根据不同地点的消费情况来调整资源分配，以更好地满足学校成员的需求和提升校园消费体验。 </p>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-6">
            <div class="card mb-4 py-3">
                <!-- 绘制柱状图的容器 -->
                <div id="pie-chart" style="width: 100%;height:100%;min-height: 300px;"></div>
            </div>
        </div>
    </div>
    <script>
        $(function () {
            f1();
            f2();

            function f1() {
                // 基于准备好的dom，初始化echarts实例
                var myChart = echarts.init(document.getElementById('bar-chart'));

                // 指定图表的配置项和数据
                var option = {
                    title: {
                        text: '消费地点出现的频次',
                        left: 'center'
                    },
                    tooltip: {
                        trigger: 'axis',
                        axisPointer: {
                            type: 'shadow'
                        }
                    },
                    grid: {
                        left: '3%',
                        right: '12%',
                        bottom: '3%',
                        containLabel: true
                    },
                    xAxis: {
                        data: {{ bar.0|safe }},
                        axisLabel: {
                            rotate: 15 // 设置标签旋转角度为45度
                        }
                    },
                    yAxis: {},
                    series: [{
                        name: '频次',
                        type: 'bar',
                        itemStyle: {
                            opacity: 1,
                            barBorderRadius: 5,
                            color: '#6effcc' // 设置柱状颜色
                        },
                        data: {{ bar.1|safe }},
                    }],
                };

                // 使用刚指定的配置项和数据显示图表。
                myChart.setOption(option);
                window.addEventListener("resize", function () {
                    myChart.resize();
                });
            }

            function f2() {
                // 基于准备好的dom，初始化echarts实例
                var myChart = echarts.init(document.getElementById('pie-chart'));

                // 指定图表的配置项和数据
                var option = {
                    title: {
                        text: '消费地点占比分布',
                        left: '40%',
                    },
                    grid: {
                        left: '0%',
                        top: '10px',
                        right: '0%',
                        bottom: '4%',
                        containLabel: true
                    },
                    tooltip: {
                        trigger: 'item',
                        formatter: '{a} <br/>{b}: {c} ({d}%)'
                    },
                    legend: {
                        orient: 'vertical',
                        left: 40,
                    },
                    series: [
                        {
                            name: '占比',
                            type: 'pie',
                            left: '20%',
                            avoidLabelOverlap: true,
                            label: {
                                show: true,
                                position: 'center'
                            },
                            data: {{ pie|safe }},
                            emphasis: {
                                itemStyle: {
                                    shadowBlur: 10,
                                    shadowOffsetX: 0,
                                    shadowColor: 'rgba(0, 0, 0, 0.5)'
                                }
                            },

                        }
                    ],
                };
                // 使用刚指定的配置项和数据显示图表。
                myChart.setOption(option);
                window.addEventListener("resize", function () {
                    myChart.resize();
                });
            }
        })
    </script>
{% endblock %}

























